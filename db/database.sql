-- TABLE CREATION

CREATE TABLE SUPPLIERS(
	ID INTEGER,
	NAME VARCHAR(50) NOT NULL,
	STREET_ADDRESS VARCHAR(50) NOT NULL,
	
	PRIMARY KEY (ID)
);

CREATE TABLE PRODUCTS(
	ID INTEGER GENERATED BY DEFAULT ON NULL AS IDENTITY,
	SUPPLIER INTEGER REFERENCES SUPPLIERS(ID),
	NAME VARCHAR(50),
	QUANTITY INTEGER DEFAULT 0,
	UNIT_PRICE NUMBER(6,2),
    
    UNIQUE (ID, SUPPLIER),
	PRIMARY KEY(ID)
);

-- INSERT STATEMENTS

INSERT ALL
INTO SUPPLIERS VALUES(1,'International Commit Machines, Inc.', '32 Long Road')
INTO SUPPLIERS VALUES(2,'Orthanc Services Co. Ltd.', '43 Even Longer Road')
INTO SUPPLIERS VALUES(3,'The Prequel Committee', '82 Programming Street')
INTO SUPPLIERS VALUES(4,'Master Woodworkers', '25 Forest Path')
INTO SUPPLIERS VALUES(5,'C-Ment, Inc.', '70 Construction Complexes Road')
INTO SUPPLIERS VALUES(6,'Gaming Associates', '85 Plumber Road')
SELECT * FROM DUAL;

INSERT INTO PRODUCTS VALUES(NULL, 1, 'Mainframe Rack', 5, 3999.99);
INSERT INTO PRODUCTS VALUES(NULL, 2, 'Pondering the Orb of Success', 12, 34.99);
INSERT INTO PRODUCTS VALUES(NULL, 1, 'Mainframe Cooling Replacement', 10, 499.99);
INSERT INTO PRODUCTS VALUES(NULL, 2, 'Imprisoning the Wizard of Marketing', 10, 25.00);
INSERT INTO PRODUCTS VALUES(NULL, 3, 'The PREQUEL Standard', 32, 10.99);
INSERT INTO PRODUCTS VALUES(NULL, 4, 'Cherry wood (natural) H12m W3cm', 15, 18.99);
INSERT INTO PRODUCTS VALUES(NULL, 5, 'HomeBuilder (tm) Mix', 10, 45.00);
INSERT INTO PRODUCTS VALUES(NULL, 5, 'HomeBuilder (tm) Reinforcer', 7, 15.00);
INSERT INTO PRODUCTS VALUES(NULL, 6, 'The Legend of Plumber', 15, 69.99);
INSERT INTO PRODUCTS VALUES(NULL, 6, 'FATHER 3', 5, 71.99);
INSERT INTO PRODUCTS VALUES(NULL, 1, '10/100/1000Mbps Switch', 12, 23.99);


-- VIEWS
CREATE VIEW PROD_SUPPLIERS AS 
	SELECT PRODUCTS.NAME "PROD_NAME", PRODUCTS.QUANTITY, PRODUCTS.UNIT_PRICE, SUPPLIERS.NAME "SUPP_NAME" 
	FROM PRODUCTS INNER JOIN SUPPLIERS ON PRODUCTS.SUPPLIER = SUPPLIERS.ID;
